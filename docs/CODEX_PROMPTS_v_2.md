# Новые промты для развития Personal Portal

## Контекст проекта
Personal Portal построен на **React 18 + Vite + Tailwind** (маршруты в `src/App.jsx`, глобальный каркас `PageShell`, хранение прав в `AuthContext`) и **Express + PostgreSQL** (`backend/index.js`, REST API `/api/*`). Уже есть синхронизация задач/заметок, RBAC по permissions, push‑уведомления через Service Worker и интеграция Outline API. Просим сохранять текущий стек и подходы (React компоненты, Express маршруты, PostgreSQL схемы, Tailwind‑стили, `apiAuthFetch`/`AuthContext`), без миграции на другие фреймворки.

Каждую доработку сопровождай технической картой в `docs/`, как это сделано в текущих файлах. После выполнения промта обязательно создай отдельный `.md` файл с описанием изменений, архитектуры и настроек.

## Промты
1. **Реалтайм обновление задач**
   ```
   Выступай как senior full-stack разработчик. Добавь поддержку WebSocket (Socket.IO) для списка задач Home: синхронизируй CRUD с каналом обновлений, чтобы изменения мгновенно появлялись у других клиентов. Обнови backend/routes/todos.js и src/pages/Home.jsx, оставив optimistic UI как fallback. После завершения оформи документ docs/TODOS_REALTIME_SYNC.md.
   ```
2. **Аудит операций Outline**
   ```
   Представь, что ты backend engineer. Реализуй аудит действий с VPN ключами: логируй создание/удаление/лимиты Outline в отдельную таблицу, добавь просмотр истории в админке. Учти права `vpn_create` и `admin_access`. Итоги опиши в docs/OUTLINE_AUDIT_LOG.md.
   ```
3. **Планировщик уведомлений и дайджестов**
   ```
   Работай как architect. Настрой cron-задачи (node-cron) для генерации ежедневного дайджеста уведомлений и рассылки через push/email-шаблоны. Добавь API для ручного запуска и настройку окна доставки. Подготовь документ docs/NOTIFICATION_DIGESTS_PLAN.md.
   ```
4. **Метрики сервера на Prometheus**
   ```
   Ты devops-разработчик. Подключи реальные показатели системы: добавь агент, который собирает метрики через Prometheus или Node exporter, и выводи их в админке вместо моков. Обнови backend/index.js и utils/systemInfo.js, сохрани совместимость без Prometheus. Оформи docs/ADMIN_METRICS_PROMETHEUS.md.
   ```
5. **Расширенный поиск и фильтры в /docs**
   ```
   Действуй как frontend engineer. Преврати раздел Документация в полноценный каталог: добавь теги, сохранение фильтров в URL, быстрый предпросмотр и подсветку совпадений. Расширь структуру данных так, чтобы новые файлы docs автоматически подхватывались. Создай описание в docs/DOCS_CATALOG_ENHANCEMENTS.md.
   ```
6. **Двухфакторная аутентификация**
   ```
   Выступай как security engineer. Внедри TOTP 2FA: добавь генерацию секретов, QR-код на странице настроек и проверку кода при логине. Реализуй резервные коды и управление в админке. Документируй в docs/AUTH_TOTP_ENABLEMENT.md.
   ```
7. **Интеграция VLESS (Xray)**
   ```
   Ты backend engineer. Заверши страницу VPN VLESS: подключи Xray/XTLS API или конфигурационные файлы, отрисуй таблицу ключей, операции CRUD и контроль трафика, аналогично Outline. Опиши архитектуру в docs/VLESS_INTEGRATION_ROADMAP.md.
   ```
8. **Мультитенантность и пространства**
   ```
   Работай как solution architect. Добавь поддержку нескольких рабочих пространств (tenant): разграничь данные задач, постов и уведомлений по `workspace_id`, настрой переключение в UI и миграции PostgreSQL. После реализации добавь документ docs/MULTITENANCY_GUIDE.md.
   ```
9. **Аналитика контента с Live-данными**
   ```
   Представь, что ты product analytics разработчик. Подключи реальный источник данных для /analytics (например, ClickHouse/PostgreSQL views), добавь выбор периода и экспорт отчётов. Реализуй кеш на backend и skeleton-состояния в UI. Зафиксируй детали в docs/ANALYTICS_DATA_PIPELINE.md.
   ```
10. **Офлайн-режим и кэширование**
    ```
    Ты frontend engineer. Добавь офлайн-поддержку: кэшируй основные страницы через Service Worker, сохраняй задачи/заметки в IndexedDB при отсутствии сети и выполняй синхронизацию при восстановлении. Распиши шаги в docs/OFFLINE_MODE_IMPLEMENTATION.md.
    ```
