name: S3 Storage Manager
description: –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π UI –∏ API-–ø—Ä–æ–∫—Å–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MinIO/S3 –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –≤—Ö–æ–¥–∞ –≤ MinIO Console.

## –¶–µ–ª—å –∏ –∑–æ–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/s3` –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ø–æ—Ä—Ç–∞–ª–∞ —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∫–µ—Ç–∞–º–∏ –∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ (–∞–Ω–∞–ª–æ–≥ –±–∞–∑–æ–≤–æ–≥–æ MinIO UI).
- –í—Å—è —Ä–∞–±–æ—Ç–∞ —Å S3 –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ backend-–ø—Ä–æ–∫—Å–∏; –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç SigV4 –∏ –Ω–µ –∑–Ω–∞–µ—Ç –∫–ª—é—á–∏.

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –±–∞–∫–µ—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –±–∞–∫–µ—Ç–∞.
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ—Å—Ç—å—é –±–∞–∫–µ—Ç–∞ (–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ/—Å–Ω—è—Ç–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ GetObject –¥–ª—è `arn:aws:s3:::bucket/*`).
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –±–∞–∫–µ—Ç–∞ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É (–ø—Å–µ–≤–¥–æ-–ø–∞–ø–∫–∏ + —Ñ–∞–π–ª—ã).
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞ (–ø–∞–ø–∫–∏).
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (drag&drop –∏–ª–∏ –≤—ã–±–æ—Ä), –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ 100 –ú–ë (–∫–æ–Ω—Ñ–∏–≥urable).
- –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏–ª–∏ –ø–∞–ø–∫–∏.
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç (–µ—Å–ª–∏ –±–∞–∫–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π).
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞.

## UI (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/s3`)
- **–õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ (Buckets List):** —Å–ø–∏—Å–æ–∫ –±–∞–∫–µ—Ç–æ–≤ (`plants`, `media`, `uploads`, `backup`, ...), –∫–Ω–æ–ø–∫–∞ ¬´Add Bucket¬ª.
- **–í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å (toolbar):**
  - –≤—ã–±—Ä–∞–Ω –±–∞–∫–µ—Ç: Create Folder, Upload File, Make Public / Make Private, Delete Bucket;
  - –≤—ã–±—Ä–∞–Ω –ø—Ä–µ—Ñ–∏–∫—Å: Upload File, Delete Folder;
  - –≤—ã–±—Ä–∞–Ω —Ñ–∞–π–ª: Download, Copy Public Link, Delete.
- **–û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å (Object Browser):** —Å–ø–∏—Å–æ–∫ `üìÅ prefix/` –∏ `üñº/üìÑ file.ext` —Å –∫–ª–∏–∫–æ–º –ø–æ –æ–±—ä–µ–∫—Ç—É –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏.
- **–ú–æ–¥–∞–ª–∫–∏:** Create New Bucket (name, public?), Create Folder (name), Upload File (D&D + –≤—ã–±–æ—Ä), Confirm Delete (file/folder/bucket).
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞–¥–º–∏–Ω-—Å—Ç–∏–ª—å (—Ç–∞–±–ª–∏—Ü—ã, –∫–∞—Ä—Ç–æ—á–∫–∏, –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏).

## Backend API (–ø—Ä–æ–∫—Å–∏, –ø—É—Ç–∏ `/api/s3/*`)
- `GET /api/s3/buckets` ‚Üí `[{ name, created }]`.
- `POST /api/s3/buckets` body `{ name }`.
- `DELETE /api/s3/buckets/{bucket}`.
- `GET /api/s3/buckets/{bucket}?prefix=/path/` ‚Üí `{ folders: ["photos/"], files: [{ name, size, modified }] }`.
- `PUT /api/s3/buckets/{bucket}/folders` body `{ path }` (—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞).
- `POST /api/s3/buckets/{bucket}/upload` form-data { file, path }.
- `DELETE /api/s3/buckets/{bucket}/file` body `{ key }`.
- `DELETE /api/s3/buckets/{bucket}/folder` body `{ prefix }`.
- `POST /api/s3/buckets/{bucket}/public` (–¥–µ–ª–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–º, –æ–±—Ä–∞—Ç–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏).

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (backend)
- –ö–ª–∏–µ–Ω—Ç S3 —á–µ—Ä–µ–∑ `@aws-sdk/client-s3` (SigV4) –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ `s3Client` —Å –∫–æ–Ω—Ñ–∏–≥–æ–º:
  - `S3_ENDPOINT=https://s3.samoshechkin.ru`, `S3_REGION=us-east-1`,
  - `S3_ACCESS_KEY`, `S3_SECRET_KEY`, `S3_BUCKET` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –±–∞–∫–µ—Ç),
  - `S3_FORCE_PATH_STYLE=true` (–¥–ª—è MinIO), `S3_PUBLIC_BASE_URL` (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—É–±–ª–∏—á–Ω—ã—Ö —Å—Å—ã–ª–æ–∫).
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏: 100 –ú–ë (–∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞/ENV), mime-–≤–∞–ª–∏–¥–∞—Ü–∏—è.
- RBAC: –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ `admin_access` (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ –æ–±—â–∏–π guard –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏).
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—å, –æ—Ç–≤–µ—Ç—ã –≤–∏–¥–∞ `{ message }` –±–µ–∑ —É—Ç–µ—á–µ–∫ –∫–ª—é—á–µ–π.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (frontend)
- Route `/admin/s3` –≤ –∞–¥–º–∏–Ω-—Ä–∞–∑–¥–µ–ª–µ, –∑–∞—â–∏—Ç–∞ `admin_access`.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (PageShell/–∞–¥–º–∏–Ω-—Å—Ç–∞–π–ª–∏–Ω–≥), —Ç–∞–±–ª–∏—Ü—ã/–ª–∏—Å—Ç–∏–Ω–≥, –º–æ–¥–∞–ª–∫–∏.
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è/–ª–µ–Ω–∏–≤–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ; –º–∏–Ω–∏–º—É–º: —Ä–∞–±–æ—Ç–∞ —Å —Ç–µ–∫—É—â–∏–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º.
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ prefix-path, –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤ —Ç—É–ª–±–∞—Ä–µ, —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ –¥–ª—è –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤.
- –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ä–∞–∑–º–µ—Ä, –¥–∞—Ç—É –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Ç–∏–ø (–∏–∫–æ–Ω–∫–∞) –¥–ª—è —Ñ–∞–π–ª–æ–≤; —Å—á—ë—Ç—á–∏–∫/–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –ø–∞–ø–æ–∫.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ UX-–¥–µ—Ç–∞–ª–∏
- –ù–µ –≤—ã–≤–æ–¥–∏—Ç—å –∏ –Ω–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–∏.
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å/—Å—Ç–µ–π—Ç.
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–∞ (bucket/folder/file).
- –î–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ —Å—Ç—Ä–æ–∏—Ç—å URL —á–µ—Ä–µ–∑ `S3_PUBLIC_BASE_URL` –∏–ª–∏ endpoint + bucket/key.

## –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏
- –ü—É—Å—Ç–æ–π –±–∞–∫–µ—Ç/–ø–∞–ø–∫–∞ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞–≥–ª—É—à–∫—É.
- –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∏–ª–∏ –ø–æ–ª–∏—Ç–∏–∫–∏ ‚Äî –≤—ã–≤–æ–¥ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.
- –ü–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–∏—Ç—å –Ω–µ–ø—É—Å—Ç–æ–π –±–∞–∫–µ—Ç ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—á–∏—Å—Ç–∫–∏ (–æ—à–∏–±–∫–∞ S3).

## –û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- –ù—É–∂–Ω–∞ –ª–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è/–ª–∏—Å—Ç—ã >1000 –æ–±—ä–µ–∫—Ç–æ–≤ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ContinuationToken`)? –°–µ–π—á–∞—Å –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞.
- –ù—É–∂–µ–Ω –ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä/—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π URL (–µ—Å–ª–∏ –±–∞–∫–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π)?

