@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  font-family: system-ui, sans-serif;
}

/* Sidebar stability tweaks */
.sidebar { @apply bg-white dark:bg-slate-950; }

.sidebar__nav {
  /* не прыгает при появлении скроллбара */
  scrollbar-gutter: stable;
}

.sidebar__link {
  /* читаемость по умолчанию в тёмной теме */
  @apply text-slate-700 dark:text-gray-200;
}

.sidebar__link[aria-current="page"],
.sidebar__sublink[aria-current="page"] {
  /* активные элементы — одинаково заметны в светлой/тёмной теме */
  @apply bg-gradient-to-r from-blue-500/15 to-indigo-600/15 ring-1 ring-blue-500/20 text-slate-900 dark:from-indigo-500/20 dark:to-blue-600/20 dark:text-white dark:ring-white/10;
}

.sidebar__link-icon {
  /* единый контейнер иконок: размер/фон/кольцо */
  @apply h-10 w-10 shrink-0 rounded-xl bg-white/60 ring-1 ring-black/5 dark:bg-white/10 dark:ring-white/10 flex items-center justify-center;
}

.btn {
  @apply inline-flex items-center gap-2 rounded-full px-5 py-2 text-sm font-semibold transition focus:outline-none focus:ring-2 focus:ring-offset-2;
}

.btn-primary {
  @apply bg-indigo-600 text-white hover:bg-indigo-500 focus:ring-indigo-400;
}

.note-content {
  @apply text-sm leading-relaxed text-gray-800 dark:text-gray-100;
}

.note-content p {
  @apply mb-4;
}

.note-content pre,
.note-content code {
  font-family: Consolas, "Fira Code", "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, monospace;
}

.note-content pre {
  @apply mb-4 rounded-2xl bg-slate-900/90 p-4 text-sm text-slate-100;
  white-space: pre-wrap;
}

.note-content table,
.note-content .note-table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.5rem 0;
}

.note-content th,
.note-content td {
  border: 1px solid rgba(15, 23, 42, 0.12);
  padding: 0.75rem;
  text-align: left;
}

.note-content img,
.note-inline-image {
  @apply my-4 w-full rounded-2xl bg-slate-100 object-cover shadow-sm dark:bg-slate-800;
}

.note-download-link {
  @apply inline-flex items-center gap-2 rounded-2xl bg-blue-50 px-4 py-2 font-semibold text-blue-700 transition hover:bg-blue-100 dark:bg-blue-500/10 dark:text-blue-200 dark:hover:bg-blue-500/20;
}

/* List styles for viewer */
.note-content ul { list-style: disc; padding-left: 1.25rem; margin: 0.25rem 0 0.75rem; }
.note-content ol { list-style: decimal; padding-left: 1.25rem; margin: 0.25rem 0 0.75rem; }
.note-content li { margin: 0.15rem 0; }

/* TipTap editor area styles (editing mode) */
.note-editor {
  @apply text-sm leading-relaxed text-gray-800 dark:text-gray-100;
  min-height: 220px;
  caret-color: #2563eb; /* make caret visible (blue) */
}

.note-editor:focus,
.note-editor:focus-visible {
  outline: none; /* remove default black outline on focus */
}

.note-editor *:focus {
  outline: none; /* also suppress inner element outlines inside editor */
}

.note-editor p { @apply mb-3; }

.note-editor pre,
.note-editor code {
  font-family: Consolas, "Fira Code", "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, monospace;
}

.note-editor pre {
  @apply mb-4 rounded-2xl bg-slate-900/90 p-4 text-sm text-slate-100;
  white-space: pre-wrap;
}

.note-editor table,
.note-editor .note-table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0 1.25rem;
  border: 1px solid rgba(15, 23, 42, 0.12); /* soften outer border to avoid dark square */
}

.note-editor th,
.note-editor td {
  border: 1px solid rgba(15, 23, 42, 0.12);
  padding: 0.55rem 0.75rem;
  text-align: left;
}

.note-editor img {
  @apply my-4 max-w-full rounded-2xl bg-slate-100 object-cover shadow-sm dark:bg-slate-800;
}

/* List styles for editor */
.note-editor ul { list-style: disc; padding-left: 1.25rem; margin: 0.25rem 0 0.75rem; }
.note-editor ol { list-style: decimal; padding-left: 1.25rem; margin: 0.25rem 0 0.75rem; }
.note-editor li { margin: 0.15rem 0; }
