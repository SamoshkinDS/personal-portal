# AGENTS.md — samoshechkin.ru (личный портал)

## Общая идея проекта
- Это мой личный портал с несколькими разделами: рабочая область, AI/ML, Документация, растения, аналитика и т.д.
- Весь код нужно писать так, как для долгоживущего личного проекта: аккуратно, без костылей «на один раз».

## Технологический стек
- Frontend: React + (указать: Vite / Next / CRA), TypeScript, выбранный UI-kit и дизайн-система портала.
- Backend: Node.js (указать фреймворк: Nest/Express/Fastify и т.д.), PostgreSQL, n8n (автоматизации).
- Хранилище файлов: MinIO/S3-совместимое хранилище для картинок и документов.
- Интеграции: n8n workflows, Telegram-бот, AI-сервер с моделями (Ollama / OpenRouter / др.).

## Структура проекта (упрощённо)
- `/frontend` или `/apps/portal` — фронт портала (React).
- `/backend` или `/services/api` — REST API.
- `/n8n` или `/workflows` — конфиги/описания интеграций.
- `/docs` — документация проекта и ТЗ.
- `/scripts` — вспомогательные скрипты деплоя и миграций.

(Подправь под свою реальную структуру.)

## Как запускать проект
- Dev-режим:
  - Frontend: `npm run dev` (или свой скрипт).
  - Backend: `npm run start:dev` (или свой).
- Прогон тестов:
  - `npm test` / `npm run lint` и т.д.
- Собрать в прод:
  - `npm run build` (front и back по отдельности, если нужно).

**Просьба к Codex:**
- Всегда описывать в комментариях, какие команды нужно запустить для проверки изменений.
- Не менять скрипты в package.json без необходимости.

## Код-стайл и практики
- Язык: TypeScript везде, где возможно.
- Стиль: следовать eslint/prettier конфигу проекта. Не отключать правила без причины.
- Архитектура:
  - Разделять ответственность: компоненты, хуки, сервисы, репозитории.
  - Не мешать UI-логику и доступ к API в одном месте.
- Комментарии:
  - Писать только по делу (сложная логика, нетривиальные решения).

## Работа с API и БД
- API REST, базовый URL: `/api`.
- БД: PostgreSQL.
- Миграции:
  - Использовать стандартный механизм проекта (Prisma / TypeORM / Knex — указать).
  - Новые таблицы и поля всегда через миграции, а не raw SQL в коде.

## Frontend-особенности портала
- Поддержка светлой/тёмной темы, не ломать переключение.
- Использовать существующие дизайн-компоненты (Card, Button, Modal, Table и т.д.).
- Не плодить свои стили, если можно переиспользовать текущие.

## Работа с файлами и S3
- Все загружаемые файлы (фото, сертификаты и т.п.) класть в S3-хранилище.
- На фронте всегда использовать готовые URL из API, не собирать URL вручную.

## Как Codex должен работать над задачами
- Разбивать большие фичи на маленькие, логичные изменения.
- Перед тем как что-то менять:
  - Прочитать существующий код (особенно в этой же папке).
  - Проверить, нет ли готовых компонентов / хуков / сервисов.
- После изменений:
  - Обновить/добавить тесты, если они есть.
  - Описать изменения в виде краткого списка (для commit/PR).

## Что НЕ делать
- Не тащить новые крупные библиотеки без явной необходимости.
- Не ломать уже существующие страницы/разделы ради мелких улучшений.
- Не заставлять запускать сложные ручные команды, если можно встроиться в существующий процесс.

